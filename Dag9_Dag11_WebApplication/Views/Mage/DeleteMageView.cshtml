
@{
    //Layout = null;
}

@model ModelMage
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>DeleteMageView</title>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#myList li").click(function () {
                var selectedItem = $(this).text();

                $.ajax({
                    url: '@Url.Action("ShwoMageInDeleteMage", "Mage")',
                    type: 'POST',
                    data: { selectedItem: selectedItem },
                    success: function (response) {
                        if (response.success) {
                            // Do something on success
                             $("#Name").val(response.name);
                             $("#IsDark").val(response.isDark);
                             $("#ID").val(response.mageId);
                            //alert("Data processed successfully");
                        }
                    },
                    error: function () {
                        alert("Fejl er opståget kunne ikke finde Personen");
                    }
                });
            });
        });
    </script>

    <script>
        $(document).ready(function () {
            $("#submitButton").click(function (e) {
                e.preventDefault(); // Prevent the form from submitting

                var nameValue = $("#Name").val(); // Get the value of the Name field

                if (nameValue === "") {
                    $("#Message2").show(); // Show the custom message if Name is empty
                    $("#Message1").hide();
                } else {
                    $("#Message2").hide(); // Hide the custom message if Name is not empty
                    $("#Message1").show();
                    $("form").submit(); // Submit the form
                }
            });
        });
    </script>
    

</head>
<body>

    <div>
        @using (Html.BeginForm("DeleteMage", "Mage"))
        { 
            @Html.Hidden("ID")

            <p>
                @Html.Label("Navn:") <br />
                @Html.TextBox("Name", null, new { @readonly = "readonly" })
                <br>
            </p>

            <p>
                @Html.Label("Is Dark:") <br />
                @Html.TextBox("IsDark", null, new { @readonly = "readonly" })
            </p>
            <p>
                <input type="submit" id="submitButton" value="Slet:">
            </p>
        }

    </div>
    <div>
        <p id="Message1" style="font-size: 18px; font-weight: bold;">Du skal vælge den mage du ønsker at slette</p>
        <p id="Message2" style="font-size: 25px; font-weight: bold; color: red; display: none;">Du skal vælge en mage før du klikker slet!!</p>
    </div>

    <style>
    .list-box {
        border: 1px solid black;
        padding: 10px;
        width: 350px;
    }</style>


    <div class = "list-box" >
    @if (@ViewBag.Magelist != null)
    {
        <ul id="myList">
            @foreach (var item in @ViewBag.Magelist)
            {
                        <li>@item.Name ID: @item.MageId </li>
            }
        </ul>
    }
    
    
    </div>

</body>
</html>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}